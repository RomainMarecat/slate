<div class="container">
  <div class="row">
    <div class="col-12">
      <form [formGroup]="form" (ngSubmit)="saveAttribute()" class="form">
        <mat-card class="mat-card mt-3">
          <mat-card-header>
            <mat-card-title>
              <button type="button" color="warn" mat-mini-fab class="absolute-fab" [routerLink]="['/admin/attribute']">
                <i class="fa fa-arrow-left" aria-hidden="true"></i>
              </button>
              <span class="justify-content-center">
                Ajouter un attribut
              </span>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content class="mat-card-content">
            <div class="row">
              <div class="col-xs-12 col-sm-12">
                <div class="d-block">
                  <mat-form-field class="mat-form-field">
                    <input matInput maxlength="100" [placeholder]="'Nom'|translate" formControlName="name">
                    <mat-hint align="start"><strong [innerHtml]="'Nom de l attribut'|translate"></strong></mat-hint>
                    <mat-hint align="end">{{ name.value.length }} {{ '/100'|translate }}</mat-hint>
                    <mat-error *ngIf="name.invalid && name.value.length === 0"
                               [innerHtml]="'Le nom ne peut pas être vide'|translate"></mat-error>
                    <mat-error *ngIf="name.invalid && name.value.length > 0"
                               [innerHtml]="'Il y a un ou des caractère(s) invalide(s)'|translate"></mat-error>
                  </mat-form-field>
                </div>
                <div class="d-block">
                  <mat-form-field class="mat-form-field" formGroupName="translations">
                    <input matInput maxlength="100" [placeholder]="'Nom en français'|translate" formControlName="fr">
                    <mat-hint align="start"><strong [innerHtml]="'Nom français'|translate"></strong></mat-hint>
                    <mat-hint align="end">{{ fr.value.length }} {{ '/100'|translate }}</mat-hint>
                    <mat-error *ngIf="fr.invalid && fr.value.length === 0"
                               [innerHtml]="'Le nom français ne peut pas être vide'|translate"></mat-error>
                    <mat-error *ngIf="fr.invalid && fr.value.length > 0"
                               [innerHtml]="'Il y a un ou des caractère(s) invalide(s)'|translate"></mat-error>
                  </mat-form-field>
                </div>
                <div class="d-block mt-1">
                  <label>Détermine avec quel composant choisir l'attribut</label>
                  <div class="mat-form-field">
                    <mat-radio-group [(ngModel)]="typeModel" formControlName="type">
                      <mat-radio-button [value]="'select'">
                        {{'Menu déroulant'|translate }}
                      </mat-radio-button>
                      <mat-radio-button [value]="'radio'">
                        {{'Bouton radio'|translate }}
                      </mat-radio-button>
                      <mat-radio-button [value]="'checkbox'">
                        {{'Checkbox'|translate }}
                      </mat-radio-button>
                      <mat-radio-button [value]="'text'">
                        {{'Texte'|translate }}
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>
                <div class="d-block mt-1">
                  <label>Détermine comment sont triés les valeurs de cet attribut en front sur la page du
                    produit</label>
                  <div class="mat-form-field">
                    <mat-radio-group [(ngModel)]="orderByModel" formControlName="order_by">
                      <mat-radio-button [aria-label]="'Nom'|translate" checked [value]="'name'">
                        {{'Nom'|translate}}
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <mat-form-field class="mat-form-field">
                      <mat-select multiple="true" placeholder="Variantes" formControlName="terms">
                        <mat-option *ngFor="let termModel of termsModel" [value]="termModel">{{ termModel }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-6">
                    <mat-form-field>
                      <input matInput placeholder="Ajouter une variante" name="term" [(ngModel)]="term"
                             formControlName="term" (keypress.enter)="addTerm($event)"/>
                    </mat-form-field>
                  </div>
                  <div class="col-6">
                    <button role="button" color="primary" type="button" mat-raised-button (click)="addTerm($event)"
                            [innerHtml]="'Ajouter'|translate">
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <div class="d-flex justify-content-around">
              <button type="button" class="back" mat-raised-button color="accent" [innerHtml]="'Annuler'|translate"
                      [routerLink]="['/admin/attribute']"></button>
              <button type="submit" class="validate" mat-raised-button role="button"
                      [attr.aria-label]="'Enregistrer'|translate" mat-raised-button color="primary"
                      [disabled]="form.invalid || form.pristine" [innerHtml]="'Enregistrer'|translate"></button>
            </div>
          </mat-card-actions>
        </mat-card>
      </form>
    </div>
  </div>
</div>
